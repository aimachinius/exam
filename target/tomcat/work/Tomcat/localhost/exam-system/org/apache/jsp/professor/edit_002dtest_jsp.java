/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2025-12-12 07:46:07 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.professor;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.List;
import Bean.Test;
import Bean.TestTerm;
import Bean.StudentInfo;

public final class edit_002dtest_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
 String username=(String) session.getAttribute("username"); String role=(String)
    session.getAttribute("role"); String fullname=(String) session.getAttribute("fullname"); if
    (username==null || role==null || !role.equals("PROFESSOR")) { response.sendRedirect("../login.jsp");
    return; } Test test = (Test) request.getAttribute("test");
    @SuppressWarnings("unchecked") List<TestTerm>
    testTerms = (List<TestTerm>) request.getAttribute("testTerms");
    @SuppressWarnings("unchecked") List<Bean.TermInfo> testTermInfos = (List<Bean.TermInfo>) request.getAttribute("testTermInfos");
    @SuppressWarnings("unchecked") List<StudentInfo> assignedStudents = (List<StudentInfo>) request.getAttribute("students");
    @SuppressWarnings("unchecked") List<StudentInfo> allStudents = (List<StudentInfo>) request.getAttribute("allStudents");
    if (test==null) { response.sendRedirect("professor?action=manage-test"); return; } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("    <title>S·ª≠a Cu·ªôc Thi - H·ªá Th·ªëng Thi Tr·∫Øc Nghi·ªám</title>\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.print( request.getContextPath() );
      out.write("/css/professor-common.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.print( request.getContextPath() );
      out.write("/css/edit-test.css\">\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body>\r\n");
      out.write("    <div class=\"navbar\">\r\n");
      out.write("        <div class=\"navbar-brand\">\r\n");
      out.write("            <div class=\"logo\">üìö</div>\r\n");
      out.write("            <h1>H·ªá Th·ªëng Thi Tr·∫Øc Nghi·ªám</h1>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"navbar-right\">\r\n");
      out.write("            <div class=\"user-info\">\r\n");
      out.write("                <div class=\"user-avatar\">");
      out.print( username.charAt(0) );
      out.write("</div>\r\n");
      out.write("                <div class=\"user-details\">\r\n");
      out.write("                    <div class=\"user-name\">");
      out.print( fullname );
      out.write("</div>\r\n");
      out.write("                    <div class=\"user-role\">Gi√°o Vi√™n</div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <a href=\"");
      out.print( request.getContextPath() );
      out.write("/logout\" class=\"logout-btn\">ƒêƒÉng Xu·∫•t</a>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <div class=\"container\">\r\n");
      out.write("        <div class=\"content-wrapper\">\r\n");
      out.write("            <h2>‚úèÔ∏è Ch·ªânh S·ª≠a Cu·ªôc Thi: ");
      out.print( test.getName() );
      out.write("</h2>\r\n");
      out.write("\r\n");
      out.write("            ");
 String error=(String) request.getAttribute("error"); String success=(String)
                request.getAttribute("success"); 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                ");
 if (error !=null) { 
      out.write("\r\n");
      out.write("                    <div class=\"alert alert-error\">\r\n");
      out.write("                        ");
      out.print( error );
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                    ");
 } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        ");
 if (success !=null) { 
      out.write("\r\n");
      out.write("                            <div class=\"alert alert-success\">\r\n");
      out.write("                                ");
      out.print( success );
      out.write("\r\n");
      out.write("                            </div>\r\n");
      out.write("                            ");
 } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                <form method=\"POST\" action=\"");
      out.print( request.getContextPath() );
      out.write("/professor\" onsubmit=\"return confirm('L∆∞u t·∫•t c·∫£ c√°c thay ƒë·ªïi n√†y v√†o c∆° s·ªü d·ªØ li·ªáu?');\">\r\n");
      out.write("                                    <input type=\"hidden\" name=\"action\" value=\"edit-test\" />\r\n");
      out.write("                                    <input type=\"hidden\" name=\"id\" value=\"");
      out.print( test.getId() );
      out.write("\" />\r\n");
      out.write("\r\n");
      out.write("                                    <!-- Section 1: Th√¥ng Tin Cu·ªôc Thi -->\r\n");
      out.write("                                    <div class=\"form-section\">\r\n");
      out.write("                                        <h3>üìã Th√¥ng Tin Cu·ªôc Thi</h3>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-group\">\r\n");
      out.write("                                            <label for=\"name\">T√™n Cu·ªôc Thi <span style=\"color: red;\">*</span></label>\r\n");
      out.write("                                            <input type=\"text\" id=\"name\" name=\"name\" value=\"");
      out.print( test.getName() );
      out.write("\" required />\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-row\">\r\n");
      out.write("                                            <div class=\"form-group\">\r\n");
      out.write("                                                <label for=\"startTime\">Th·ªùi Gian B·∫Øt ƒê·∫ßu <span style=\"color: red;\">*</span></label>\r\n");
      out.write("                                                <input type=\"datetime-local\" id=\"startTime\" name=\"startTime\" value=\"");
      out.print( test.getStartTime().toString().replace(" ", "T").substring(0, 16) );
      out.write("\" required />\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"form-group\">\r\n");
      out.write("                                                <label for=\"endTime\">Th·ªùi Gian K·∫øt Th√∫c <span style=\"color: red;\">*</span></label>\r\n");
      out.write("                                                <input type=\"datetime-local\" id=\"endTime\" name=\"endTime\" value=\"");
      out.print( test.getEndTime().toString().replace(" ", "T").substring(0, 16) );
      out.write("\" required />\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-group\">\r\n");
      out.write("                                            <label for=\"time\">Th·ªùi L∆∞·ª£ng (Ph√∫t) <span style=\"color: red;\">*</span></label>\r\n");
      out.write("                                            <input type=\"number\" id=\"time\" name=\"time\" value=\"");
      out.print( test.getTime() );
      out.write("\" min=\"1\" required />\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- Section 2: Ch·ªânh S·ª≠a K·ª≥ Thi (Term) -->\r\n");
      out.write("                                    <div class=\"form-section\">\r\n");
      out.write("                                        <h3>üìö Ch·ªânh S·ª≠a S·ªë C√¢u H·ªèi Theo Chuy√™n ƒê·ªÅ</h3>\r\n");
      out.write("                                        <div class=\"info-box\">\r\n");
      out.write("                                            T·ªïng s·ªë c√¢u h·ªèi hi·ªán t·∫°i: <strong>");
      out.print( test.getNumbersQuestion() );
      out.write("</strong> c√¢u\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        ");
 java.util.List<?> sourceTerms = (testTermInfos!=null && !testTermInfos.isEmpty()) ? testTermInfos : testTerms; 
      out.write("\r\n");
      out.write("                                        ");
 if (sourceTerms==null || sourceTerms.isEmpty()) { 
      out.write("\r\n");
      out.write("                                            <div class=\"empty-state\">\r\n");
      out.write("                                                <p>Ch∆∞a c√≥ chuy√™n ƒë·ªÅ n√†o</p>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            ");
 } else { 
      out.write("\r\n");
      out.write("                                                ");
 for (Object o : sourceTerms) {
                                                       if (o instanceof Bean.TermInfo) {
                                                           Bean.TermInfo tt = (Bean.TermInfo) o;
                                                
      out.write("\r\n");
      out.write("                                                    <div class=\"term-edit-row\">\r\n");
      out.write("                                                        <div>\r\n");
      out.write("                                                            <label>Chuy√™n ƒê·ªÅ: <strong>");
      out.print( (tt.getTermName()!=null && !tt.getTermName().isEmpty()) ? tt.getTermName() : ("ID " + tt.getTermId()) );
      out.write("</strong></label>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div>\r\n");
      out.write("                                                            <label for=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\">S·ªë C√¢u H·ªèi</label>\r\n");
      out.write("                                                            <input type=\"number\" id=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\" name=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\" value=\"");
      out.print( tt.getNumberQuestions() );
      out.write("\" min=\"1\" />\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div style=\"text-align: right;\">\r\n");
      out.write("                                                            <small style=\"color: #999;\">ID TestTerm: ");
      out.print( tt.getId() );
      out.write(" | Term ID: ");
      out.print( tt.getTermId() );
      out.write("</small>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                ");
 } else if (o instanceof TestTerm) {
                                                       TestTerm tt = (TestTerm) o;
                                                
      out.write("\r\n");
      out.write("                                                    <div class=\"term-edit-row\">\r\n");
      out.write("                                                        <div>\r\n");
      out.write("                                                            <label>Chuy√™n ƒê·ªÅ : <strong>");
      out.print( tt.getTermId() );
      out.write("</strong></label>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div>\r\n");
      out.write("                                                            <label for=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\">S·ªë C√¢u H·ªèi</label>\r\n");
      out.write("                                                            <input type=\"number\" id=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\" name=\"numQuestions_");
      out.print( tt.getId() );
      out.write("\" value=\"");
      out.print( tt.getNumberQuestions() );
      out.write("\" min=\"1\" />\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div style=\"text-align: right;\">\r\n");
      out.write("                                                            <small style=\"color: #999;\">ID TestTerm: ");
      out.print( tt.getId() );
      out.write("</small>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                ");
 }
                                                   } 
      out.write("\r\n");
      out.write("                                                ");
 } 
      out.write("\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- Section 3: Qu·∫£n L√Ω Sinh Vi√™n -->\r\n");
      out.write("                                    <div class=\"form-section\">\r\n");
      out.write("                                        <h3>üë• Qu·∫£n L√Ω Sinh Vi√™n Thi</h3>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Danh s√°ch sinh vi√™n ƒë∆∞·ª£c ph√©p thi -->\r\n");
      out.write("                                        ");
 if (assignedStudents==null || assignedStudents.isEmpty()) { 
      out.write("\r\n");
      out.write("                                            <div class=\"empty-state\">\r\n");
      out.write("                                                <p>Ch∆∞a c√≥ sinh vi√™n n√†o ƒë∆∞·ª£c g√°n v√†o cu·ªôc thi</p>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            ");
 } else { 
      out.write("\r\n");
      out.write("                                                <h4 style=\"margin-bottom: 10px; color: #333;\">Sinh Vi√™n ƒê√£ ƒê∆∞·ª£c G√°n (Nh·∫•n X√≥a ƒê·ªÉ G·ª°)</h4>\r\n");
      out.write("                                                <div class=\"table-wrapper\">\r\n");
      out.write("                                                    <table class=\"students-table\">\r\n");
      out.write("                                                        <thead>\r\n");
      out.write("                                                            <tr>\r\n");
      out.write("                                                                <th>M√£ Sinh Vi√™n</th>\r\n");
      out.write("                                                                <th>T√™n Sinh Vi√™n</th>\r\n");
      out.write("                                                                <th>L·ªõp</th>\r\n");
      out.write("                                                                <th>H√†nh ƒê·ªông</th>\r\n");
      out.write("                                                            </tr>\r\n");
      out.write("                                                        </thead>\r\n");
      out.write("                                                        <tbody>\r\n");
      out.write("                                                            ");
 for (StudentInfo student : assignedStudents) { 
      out.write("\r\n");
      out.write("                                                                <tr>\r\n");
      out.write("                                                                    <td>");
      out.print( student.getId() );
      out.write("</td>\r\n");
      out.write("                                                                    <td>");
      out.print( student.getName() );
      out.write("</td>\r\n");
      out.write("                                                                    <td>");
      out.print( student.getClassName() );
      out.write("</td>\r\n");
      out.write("                                                                    <td>\r\n");
      out.write("                                                                        <form method=\"POST\" action=\"");
      out.print( request.getContextPath() );
      out.write("/professor\" style=\"display:inline;margin:0;\">\r\n");
      out.write("                                                                            <input type=\"hidden\" name=\"action\" value=\"remove-student-from-test\" />\r\n");
      out.write("                                                                            <input type=\"hidden\" name=\"testId\" value=\"");
      out.print( test.getId() );
      out.write("\" />\r\n");
      out.write("                                                                            <input type=\"hidden\" name=\"studentId\" value=\"");
      out.print( student.getId() );
      out.write("\" />\r\n");
      out.write("                                                                            <button type=\"submit\" class=\"btn-small btn-remove\">üóëÔ∏è X√≥a</button>\r\n");
      out.write("                                                                        </form>\r\n");
      out.write("                                                                    </td>\r\n");
      out.write("                                                                </tr>\r\n");
      out.write("                                                                ");
 } 
      out.write("\r\n");
      out.write("                                                        </tbody>\r\n");
      out.write("                                                    </table>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                ");
 } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Th√™m sinh vi√™n m·ªõi -->\r\n");
      out.write("                                        <div class=\"add-student-section\">\r\n");
      out.write("                                            <h4>‚ûï Th√™m Sinh Vi√™n M·ªõi</h4>\r\n");
      out.write("                                            ");
 if (allStudents==null || allStudents.isEmpty()) { 
      out.write("\r\n");
      out.write("                                                <p style=\"color: #999; font-size: 13px;\">Kh√¥ng c√≥ sinh vi√™n n√†o trong h·ªá th·ªëng</p>\r\n");
      out.write("                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                    <form method=\"POST\" action=\"");
      out.print( request.getContextPath() );
      out.write("/professor\">\r\n");
      out.write("                                                        <div class=\"add-row\">\r\n");
      out.write("                                                            <select name=\"studentIdToAdd\" required>\r\n");
      out.write("                                                                <option value=\"\">-- Ch·ªçn sinh vi√™n --</option>\r\n");
      out.write("                                                                ");
 for (StudentInfo s : allStudents) { 
      out.write("\r\n");
      out.write("                                                                    <option value=\"");
      out.print( s.getId() );
      out.write('"');
      out.write('>');
      out.print( s.getId() );
      out.write(' ');
      out.write('-');
      out.write(' ');
      out.print( s.getName() );
      out.write(' ');
      out.write('-');
      out.write(' ');
      out.print( s.getClassName() );
      out.write("</option>\r\n");
      out.write("                                                                    ");
 } 
      out.write("\r\n");
      out.write("                                                            </select>\r\n");
      out.write("                                                            <input type=\"hidden\" name=\"action\" value=\"add-student-to-test\" />\r\n");
      out.write("                                                            <input type=\"hidden\" name=\"testId\" value=\"");
      out.print( test.getId() );
      out.write("\" />\r\n");
      out.write("                                                            <button type=\"submit\" class=\"btn-small btn-add\">‚ûï Th√™m</button>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </form>\r\n");
      out.write("                                                    ");
 } 
      out.write("\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- N√∫t l∆∞u v√† quay l·∫°i -->\r\n");
      out.write("                                    <div class=\"button-group\">\r\n");
      out.write("                                        <button type=\"submit\" class=\"btn btn-primary\">üíæ L∆∞u T·∫•t C·∫£ Thay ƒê·ªïi</button>\r\n");
      out.write("                                        <a href=\"");
      out.print( request.getContextPath() );
      out.write("/professor?action=manage-test\"\r\n");
      out.write("                                            class=\"btn btn-secondary\" style=\"text-align: center;\">‚Üê Quay L·∫°i</a>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </form>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"back-link\" style=\"margin-top: 30px;\">\r\n");
      out.write("                                    <a href=\"professor-dashboard.jsp\">‚Üê Quay l·∫°i Dashboard</a>\r\n");
      out.write("                                </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</body>\r\n");
      out.write("\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
